version: '3'
services: 
    postgres-server:
        image: postgres
        env_file:
            - database.env
        volumes:
            - postgres-server-data:/var/lib/postgresql/data/
        ports:
            - "5432:5432"
    redis-server:
        image: redis
        ports:
            - "6379:6379"
    computing-app:
        build: ./computer
        restart: always
        volumes:
            - ./computer/src/app:/home/jon/Desktop/Code/SimpleRecommend/computer
    go-app:
        build: ./front_go
        ports:
            - "8080:8080"
    provider-app:
        build: ./provider_area
        ports:
            - "8081:8080"
    dashboard:
        build: ./dashboard
        ports:
            - 3001:3000
        stdin_open: true # docker run -i
        tty: true        # docker run -t
        environment:
            - CHOKIDAR_USEPOLLING=true
        volumes:
            - ./dashboard/src:/app
volumes:
    postgres-server-data:
